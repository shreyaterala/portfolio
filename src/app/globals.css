@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
    --foreground-rgb: 30, 41, 59;
    --background-start-rgb: 251, 250, 245;
    --background-end-rgb: 251, 250, 245;
}

body {
    color: rgb(var(--foreground-rgb));
    background: rgb(var(--background-start-rgb));
}

/* Lofi Grain Texture */
body::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0.04;
    z-index: 50;
    pointer-events: none;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
}

@layer utilities {
    .text-balance {
        text-wrap: balance;
    }
}

/* Custom Engineering Typography for Dynamic Content */
.prose-ink {
    @apply text-slate-700 leading-relaxed;
}

.prose-ink h2 {
    @apply text-2xl md:text-3xl font-bold text-ink mt-12 mb-6 tracking-tight flex items-center gap-3;
}

.prose-ink h2::before {
    content: "";
    @apply block w-2 h-2 bg-accent rounded-sm;
}

.prose-ink h3 {
    @apply text-xl font-bold text-slate-800 mt-8 mb-4 border-l-2 border-accent pl-4;
}

.prose-ink p {
    @apply mb-6 text-base md:text-lg;
}

.prose-ink ul {
    @apply list-none mb-6 space-y-2;
}

.prose-ink li {
    @apply pl-6 relative before:content-['>'] before:absolute before:left-0 before:text-accent before:font-mono before:font-bold;
}

.prose-ink strong {
    @apply text-ink font-semibold;
}

.prose-ink img {
    @apply rounded-xl border border-slate-200/50 shadow-sm mx-auto my-8 bg-white/50 p-2;
    max-width: 100%;
    width: auto !important;
    max-height: 600px;
    object-fit: contain;
}

.prose-ink video {
    @apply rounded-xl border border-slate-200/50 shadow-sm w-full my-8 bg-white/50 p-2;
}

.prose-ink code {
    @apply font-mono text-sm bg-slate-100 text-slate-800 px-1.5 py-0.5 rounded border border-slate-200;
}

/* Specific component styles handling */
.prose-ink .system-diagram {
    @apply flex flex-col md:flex-row items-center justify-center gap-4 my-8 p-6 bg-white/40 border border-slate-200 rounded-xl overflow-x-auto;
}

.prose-ink .diagram-node {
    @apply flex flex-col items-center justify-center p-4 bg-white border border-slate-300 rounded-lg shadow-sm min-w-[120px] text-center;
}

.prose-ink .diagram-node strong {
    @apply block text-sm font-bold text-ink;
}

.prose-ink .diagram-node span {
    @apply text-xs text-slate-500 font-mono mt-1;
}

.prose-ink .diagram-arrow {
    @apply flex flex-col items-center justify-center mx-2;
}

.prose-ink .arrow-label {
    @apply text-[10px] uppercase tracking-widest text-slate-400 mb-1 font-mono;
}

.prose-ink .arrow-line {
    @apply w-0.5 h-8 md:w-8 md:h-0.5 bg-accent relative;
}

.prose-ink .arrow-line::after {
    content: "";
    @apply absolute block w-2 h-2 border-accent rotate-45 border-r-2 border-b-2 border-t-0 bottom-0 left-1/2 -translate-x-1/2 md:border-b-0 md:border-t-2 md:right-0 md:top-1/2 md:-translate-y-1/2 md:left-auto md:translate-x-0 md:bottom-auto;
}

/* Gallery Handling */
.prose-ink .modal-gallery {
    @apply grid grid-cols-2 md:grid-cols-3 gap-4 my-8;
}

.prose-ink .modal-gallery img {
    @apply my-0 h-32 md:h-48 object-cover cursor-pointer hover:opacity-80 transition-opacity;
}